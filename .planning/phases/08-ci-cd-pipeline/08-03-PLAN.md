---
phase: 08-ci-cd-pipeline
plan: 03
type: execute
wave: 2
depends_on: []
files_modified:
  - .github/workflows/lint.yml
  - eslint.config.js
  - .prettierrc
  - .prettierignore
  - package.json
autonomous: true

must_haves:
  truths:
    - "ESLint runs on every PR and enforces code quality standards"
    - "Prettier formatting is validated on every PR"
    - "PRs with linting or formatting violations are rejected"
  artifacts:
    - path: ".github/workflows/lint.yml"
      provides: "Linting and formatting enforcement workflow"
      contains: "npm run lint"
    - path: "eslint.config.js"
      provides: "ESLint 9 flat config for TypeScript"
      contains: "typescript-eslint"
    - path: ".prettierrc"
      provides: "Prettier configuration"
      contains: "semi"
    - path: "package.json"
      provides: "Scripts for linting and formatting"
      contains: '"lint"'
  key_links:
    - from: ".github/workflows/lint.yml"
      to: "npm run lint"
      via: "ESLint check step"
      pattern: "npm run lint"
    - from: ".github/workflows/lint.yml"
      to: "npm run format:check"
      via: "Prettier check step"
      pattern: "npm run format:check"
---

<objective>
Add ESLint and Prettier enforcement to CI pipeline for consistent code quality and formatting.

Purpose: Prevent style inconsistencies and catch common TypeScript errors before code review. Uses ESLint 9 flat config for modern TypeScript linting and Prettier for automated formatting validation.

Output: Lint workflow that runs ESLint and Prettier checks on every PR, ESLint 9 flat config with TypeScript rules, Prettier configuration, and package.json scripts for local development.
</objective>

<execution_context>
@C:\Users\lucid\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\lucid\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@C:\Users\lucid\OneDrive\Desktop\prompts\msw\.planning\PROJECT.md
@C:\Users\lucid\OneDrive\Desktop\prompts\msw\.planning\ROADMAP.md
@C:\Users\lucid\OneDrive\Desktop\prompts\msw\.planning\STATE.md
@C:\Users\lucid\OneDrive\Desktop\prompts\msw\.planning\phases\08-ci-cd-pipeline\08-RESEARCH.md
@C:\Users\lucid\OneDrive\Desktop\prompts\msw\package.json
</context>

<tasks>

<task type="auto">
  <name>Install ESLint and Prettier dependencies</name>
  <files>package.json</files>
  <action>
Install ESLint 9 and Prettier dependencies:

**Run:**
```bash
npm install -D eslint @eslint/js @types/eslint__js typescript-eslint prettier eslint-config-prettier
```

This installs:
- eslint (^9.x): Core linter
- @eslint/js: ESLint JavaScript configuration
- @types/eslint__js: TypeScript types for ESLint JS config
- typescript-eslint: TypeScript ESLint plugin and parser
- prettier (^3.x): Code formatter
- eslint-config-prettier: Disables ESLint rules that conflict with Prettier

Reference "Installation" section from 08-RESEARCH.md for exact packages.
  </action>
  <verify>
cat package.json | grep '"eslint"'
cat package.json | grep '"prettier"'
cat package.json | grep '"typescript-eslint"'
  </verify>
  <done>ESLint, Prettier, and TypeScript ESLint packages installed as devDependencies</done>
</task>

<task type="auto">
  <name>Create ESLint configuration</name>
  <files>eslint.config.js</files>
  <action>
Create ESLint 9 flat config for TypeScript:

**File: eslint.config.js**
```javascript
import js from '@eslint/js';
import tseslint from 'typescript-eslint';

export default tseslint.config(
  js.configs.recommended,
  ...tseslint.configs.recommended,
  {
    ignores: ['dist/', 'coverage/', 'node_modules/', '.planning/']
  },
  {
    rules: {
      '@typescript-eslint/no-unused-vars': ['error', { argsIgnorePattern: '^_' }],
      '@typescript-eslint/explicit-function-return-type': 'off',
      '@typescript-eslint/no-explicit-any': 'warn'
    }
  }
);
```

Key decisions:
- Use ESLint 9 flat config (not .eslintrc.js - deprecated)
- Recommended configs for JavaScript and TypeScript
- Ignore dist/, coverage/, node_modules/, .planning/
- Allow unused vars prefixed with _ (common pattern for intentionally unused parameters)
- Don't require explicit return types (too verbose for TypeScript's type inference)
- Warn on `any` usage (not error - sometimes necessary but should be reviewed)

Reference ESLint Configuration example from 08-RESEARCH.md.
  </action>
  <verify>
cat eslint.config.js | grep "typescript-eslint"
cat eslint.config.js | grep "ignores:"
  </verify>
  <done>eslint.config.js exists with TypeScript rules and appropriate ignores</done>
</task>

<task type="auto">
  <name>Create Prettier configuration</name>
  <files>.prettierrc, .prettierignore</files>
  <action>
Create Prettier configuration files:

**File: .prettierrc**
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": false,
  "printWidth": 100,
  "tabWidth": 2,
  "arrowParens": "always"
}
```

**File: .prettierignore**
```
dist/
coverage/
node_modules/
.planning/
*.md
package-lock.json
```

Configuration decisions:
- semi: true (use semicolons - TypeScript convention)
- trailingComma: es5 (trailing commas where valid in ES5)
- singleQuote: false (double quotes - matches TypeScript convention)
- printWidth: 100 (slightly wider than default 80, balances readability and screen space)
- tabWidth: 2 (standard for JavaScript/TypeScript)
- arrowParens: always (clearer for TypeScript type annotations)
- Ignore: build artifacts, markdown (preserve manual formatting), lock files

Reference Prettier Configuration example from 08-RESEARCH.md.
  </action>
  <verify>
cat .prettierrc | grep "semi"
cat .prettierignore | grep "dist/"
  </verify>
  <done>.prettierrc and .prettierignore exist with appropriate configuration</done>
</task>

<task type="auto">
  <name>Add lint and format scripts to package.json</name>
  <files>package.json</files>
  <action>
Add npm scripts for linting and formatting:

**Add to package.json scripts:**
```json
"lint": "eslint .",
"lint:fix": "eslint . --fix",
"format": "prettier --write .",
"format:check": "prettier --check ."
```

Scripts:
- lint: Check all files for linting errors
- lint:fix: Auto-fix linting errors where possible
- format: Auto-format all files with Prettier
- format:check: Verify files are formatted (for CI - doesn't modify files)

Reference Package.json Scripts example from 08-RESEARCH.md.
  </action>
  <verify>
cat package.json | grep '"lint"'
cat package.json | grep '"format:check"'
npm run lint 2>&1 | head -10
npm run format:check 2>&1 | head -10
  </verify>
  <done>package.json has lint and format scripts, and they execute successfully</done>
</task>

<task type="auto">
  <name>Create lint workflow</name>
  <files>.github/workflows/lint.yml</files>
  <action>
Create GitHub Actions workflow for linting and formatting enforcement:

**File: .github/workflows/lint.yml**
- Name: Lint
- Triggers:
  - pull_request: branches [main, master]
  - push: branches [main, master]
- Job: lint (ubuntu-latest)
- Steps:
  1. Checkout code: actions/checkout@v4
  2. Setup Node.js 20.x: actions/setup-node@v4 with cache: 'npm'
  3. Install dependencies: `npm ci`
  4. Run ESLint: `npm run lint`
  5. Check Prettier formatting: `npm run format:check`

Reference Pattern 2 from 08-RESEARCH.md for lint workflow structure.

Key behaviors:
- If ESLint finds errors, workflow fails
- If Prettier finds unformatted files, workflow fails
- Both checks run (even if first fails) to show all issues
  </action>
  <verify>
cat .github/workflows/lint.yml | grep "Lint"
cat .github/workflows/lint.yml | grep "npm run lint"
cat .github/workflows/lint.yml | grep "npm run format:check"
  </verify>
  <done>Lint workflow exists with ESLint and Prettier checks</done>
</task>

</tasks>

<verification>
1. ESLint and Prettier packages installed
2. eslint.config.js created with TypeScript rules
3. .prettierrc and .prettierignore created
4. package.json has lint and format scripts
5. Lint workflow created with both ESLint and Prettier checks
6. Local linting works: `npm run lint` and `npm run format:check` execute
</verification>

<success_criteria>
- ESLint runs on every PR and enforces code quality (CI-04)
- Prettier formatting is validated on every PR (CI-04)
- PRs with violations are rejected (CI-07 partial)
- Developers can run `npm run lint:fix` and `npm run format` locally
</success_criteria>

<output>
After completion, create `.planning/phases/08-ci-cd-pipeline/08-03-SUMMARY.md`

**Post-Implementation:**
Developers should run `npm run format` to auto-format existing codebase before first lint workflow runs. This ensures the initial PR doesn't fail due to pre-existing formatting issues.

Optional: Run `npm run lint:fix` to auto-fix simple linting errors.
</output>
