---
phase: 02-auto-conversation-engine
plan: 06
type: execute
wave: 4
depends_on: ["02-05"]
files_modified:
  - src/auto-conversation/engine.ts
autonomous: false

must_haves:
  truths:
    - "TypeScript builds without errors for the full project"
    - "All auto-conversation module exports resolve correctly"
    - "Engine class can be instantiated (constructor doesn't throw)"
  artifacts:
    - path: "src/auto-conversation/index.ts"
      provides: "All Phase 2 public exports"
  key_links:
    - from: "src/auto-conversation/engine.ts"
      to: "src/auto-conversation/index.ts"
      via: "re-exported through barrel"
      pattern: "export.*engine"
---

<objective>
Build verification and smoke test for the complete auto-conversation module.

Purpose: Confirms all Phase 2 code compiles, exports resolve, and the engine can be constructed. Human verifies Ollama integration works.
Output: Verified, buildable Phase 2 module.
</objective>

<execution_context>
@C:\Users\lucid\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\lucid\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-auto-conversation-engine/02-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification</name>
  <files>src/auto-conversation/engine.ts</files>
  <action>
Run full TypeScript compilation and fix any errors:

1. `npx tsc --noEmit` — fix all type errors
2. Verify all imports between auto-conversation modules resolve
3. Verify Phase 1 imports (humanize, wait, extractor, selectors) resolve
4. Verify ollama/zod/zod-to-json-schema imports resolve

If any type errors exist from prior plans, fix them now. This is the integration verification step.
  </action>
  <verify>`npx tsc --noEmit` exits with code 0</verify>
  <done>Full project compiles without TypeScript errors</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete auto-conversation module: TopicDetector, RelevanceScorer (Ollama), BudgetTracker, TopicClicker, ExpansionState, and TopicExpansionEngine orchestrating BFS expansion.</what-built>
  <how-to-verify>
    1. Verify Ollama is running: `ollama list` should show available models
    2. Verify model is pulled: `ollama pull qwen2.5:1.5b` (if not already)
    3. Review the engine.ts file — confirm the BFS loop is readable and correct
    4. Review types.ts — confirm all interfaces match the PRD requirements
    5. Check that BudgetTracker writes to `.msw/budget.json` (or configured path)
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes
- All 7 files in src/auto-conversation/ exist and export correctly
- Human confirms Ollama setup and code review
</verification>

<success_criteria>
Phase 2 module compiles, all components wire together, and human has verified the implementation.
</success_criteria>

<output>
After completion, create `.planning/phases/02-auto-conversation-engine/02-06-SUMMARY.md`
</output>
